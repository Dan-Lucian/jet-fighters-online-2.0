"use strict";(self.webpackChunkjet_fighters_online_2_0=self.webpackChunkjet_fighters_online_2_0||[]).push([[526,990],{990:function(e,n,r){r.r(n),r.d(n,{default:function(){return c}});var t=r(3504),s="PageNonexistent_wrapper__TAlZn",a="PageNonexistent_link__ojQmY",o="PageNonexistent_text__k-fmD",i=r(184),c=function(){return(0,i.jsxs)("main",{className:s,children:[(0,i.jsx)("div",{className:o,children:"404 no page here"}),(0,i.jsx)(t.rU,{className:a,to:"/",children:"home"})]})}},5526:function(e,n,r){r.r(n),r.d(n,{default:function(){return D}});var t=r(885),s=r(8592),a=r(1413),o=r(2791),i=r(6871),c=r(7264),l=r(2142),u={joiner:{name:"_____ ",score:0},owner:{name:"_____ ",score:0},settings:{scoreMax:"0",widthMap:600,heightMap:300}},d=function(){var e=(0,i.TH)().state,n=(0,s.m)(),r=(0,t.Z)(n,2),d=r[0],f=r[1],m=(0,c.js)(),p=(0,t.Z)(m,2),v=p[0],_=p[1],w=(0,l.J)(),h=w.message,g=w.resetMessage,y=(0,i.s0)(),b=d.stateApp,x=h.event,j=h.stateGame||e||u,Z="countdown"===b,N="game"===b;return(0,o.useEffect)((function(){if(N&&"updateGame"===x&&console.log("EVENT: updateGame"),(N||Z)&&"quitJoiner"===x&&(console.log("EVENT: quitJoiner"),f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{stateApp:"lobby",msgPopup:"".concat(v.nameJoiner," has quit/disconnected.")})})),_((function(e){return(0,a.Z)((0,a.Z)({},e),{},{nameJoiner:"Empty...",isConnectedJoiner:!1,isReadyJoiner:!1})})),g(),y("/lobby")),(N||Z)&&"quitOwner"===x&&(console.log("EVENT: quitOwner"),f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{stateApp:"preLobby",msgPopup:"".concat(v.nameOwner," has quit/disconnected.")})})),_((0,a.Z)({},c._k)),g(),y("/")),N&&"gameOver"===x){console.log("EVENT: gameOver");var e=h.winner,n=h.winsOwner,r=h.winsJoiner;console.log("Winner: ",e),f((function(n){return(0,a.Z)((0,a.Z)({},n),{},{stateApp:"gameOver",winner:e})})),_((function(e){return(0,a.Z)((0,a.Z)({},e),{},{winsOwner:n,winsJoiner:r,isReadyOwner:!1,isReadyJoiner:!1})}))}}),[h]),j},f=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,t=(0,o.useRef)();(0,o.useEffect)((function(){console.log("effect runs"),t.current=n}),[n]),(0,o.useEffect)((function(){if(r&&r.addEventListener){var n=function(e){return t.current(e)};return console.log("".concat(e," event added")),r.addEventListener(e,n),function(){r.removeEventListener(e,n),console.log("".concat(e," event removed"))}}console.log("Element doesn't support addEventListener")}),[e,r])},m=function(){var e=(0,s.m)(),n=(0,t.Z)(e,1)[0],r=(0,l.J)().sendMessage,i=n.stateApp,c=n.isOwnerLobby,u="game"===i,d=(0,o.useCallback)((function(e){if(u){if(e.preventDefault(),e.repeat)return;var n={event:"input",isOwnerLobby:c};switch(e.key){case"ArrowRight":return void r((0,a.Z)((0,a.Z)({},n),{},{isPressedRight:!0}));case"ArrowLeft":return void r((0,a.Z)((0,a.Z)({},n),{},{isPressedLeft:!0}));case" ":r((0,a.Z)((0,a.Z)({},n),{},{isPressedFire:!0}))}}}),[c,u,r]),m=(0,o.useCallback)((function(e){if(u){if(e.preventDefault(),e.repeat)return;var n={event:"input",isOwnerLobby:c};switch(e.key){case"ArrowRight":return void r((0,a.Z)((0,a.Z)({},n),{},{isReleasedRight:!0}));case"ArrowLeft":r((0,a.Z)((0,a.Z)({},n),{},{isReleasedLeft:!0}))}}}),[c,u,r]);f("keydown",d),f("keyup",m)},p=r(990),v=function(e){e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height)},_=function(e,n){for(var r=n.owner,t=n.joiner,s=0;s<r.bullets.length;s+=1)e.fillStyle=r.bullets[s].color,e.fillRect(r.bullets[s].x,r.bullets[s].y,4,4);for(var a=0;a<t.bullets.length;a+=1)e.fillStyle=t.bullets[a].color,e.fillRect(t.bullets[a].x,t.bullets[a].y,4,4)},w=function(e,n,r){var t=n.owner,s=n.joiner,a=r.imgJetOwner,o=r.imgJetJoiner;h(e,t,a),h(e,s,o)},h=function(e,n,r){var t=n.scale,s=n.x,a=n.y,o=-(n.angle*Math.PI/180+Math.PI);e.setTransform(t,0,0,t,s,a),e.rotate(o),e.drawImage(r,-r.width/2,-r.height/2)},g=r(6080),y="Game_game__hsCmJ",b="Game_wrapper__L87OH",x="Game_wrapperScores__hx1oH",j=r(184),Z=function(e){var n=e.stateGame,r=(0,o.useRef)(),t=(0,o.useRef)(null);(0,o.useEffect)((function(){if(n.settings.idLobby){var e=new Image;e.src=g.N[n.owner.typeJet].imgJet;var r=new Image;r.src=g.N[n.joiner.typeJet].imgJet,t.current={imgJetOwner:e,imgJetJoiner:r}}}),[]),(0,o.useEffect)((function(){if(n.settings.idLobby){var e,s=r.current.getContext("2d");return function r(){!function(e,n,r){v(e),_(e,n),w(e,n,r)}(s,n,t.current),e=requestAnimationFrame(r)}(),function(){cancelAnimationFrame(e)}}}));var s=n.settings,a=s.widthMap,i=s.heightMap;return(0,j.jsxs)("div",{className:b,children:[(0,j.jsx)("canvas",{ref:r,width:a,height:i,className:y,children:"Game screen"}),(0,j.jsxs)("div",{className:x,children:[(0,j.jsx)("div",{style:{color:n.owner.color},children:n.owner.score}),(0,j.jsx)("div",{style:{color:n.joiner.color},children:n.joiner.score})]})]})},N="Header_header__HJqgS",J=function(e){var n=e.text;return(0,j.jsx)("h2",{className:N,children:n})},E="Player_wrapper__j5xys",L="Player_name__uwnPQ",O="Player_ball__cySlH",P="Player_jetType__3sei-",A="Player_wrapperColor__pChYp",C="Player_textColor__TeJJj",G="Player_squareColor__V8cex",R=function(e){var n=e.player,r=n.name,t=n.score,s=n.typeJet;return(0,j.jsxs)("div",{className:E,children:[(0,j.jsx)("div",{className:O}),(0,j.jsxs)("p",{className:L,children:[r,": ",t]}),(0,j.jsxs)("p",{className:P,children:["Jet type: ",s]}),(0,j.jsxs)("div",{className:A,children:[(0,j.jsx)("p",{className:C,children:"Color:"}),(0,j.jsx)("div",{style:{backgroundColor:n.color},className:G})]})]})},k="TablePlayers_table__YqmUo",M=function(e){var n=e.stateGame,r=n.owner,t=n.joiner,s=n.settings.scoreMax;return(0,j.jsxs)("div",{className:k,children:[(0,j.jsx)(J,{text:"Max score: ".concat(s)}),(0,j.jsx)(R,{player:r}),(0,j.jsx)(R,{player:t})]})},T={wrapper:"Countdown_wrapper__ho6SL"},q=function(e){var n=e.handleCountownEnd,r=(0,o.useState)(3),s=(0,t.Z)(r,2),a=s[0],i=s[1];return(0,o.useEffect)((function(){var e=setInterval((function(){i((function(e){return e-1}))}),1e3);return function(){clearInterval(e)}}),[]),(0,o.useLayoutEffect)((function(){a<1&&n()})),(0,j.jsx)("div",{className:T.wrapper,children:(0,j.jsx)("div",{className:T.count,children:a})})},I="GameOver_wrapper__23BzO",S=function(e){var n=e.winner,r=e.isOwnerLobby,t=e.handleGameOverEnd;(0,o.useEffect)((function(){var e=setTimeout((function(){t()}),3e3);return function(){clearInterval(e),t()}}),[t]);var s="joiner"===n?"You Win":"You Lose";return r&&(s="owner"===n?"You Win":"You Lose"),"draw"===n&&(s="It's a draw"),(0,j.jsx)("div",{className:I,children:s})},Y="Overlay_wrapper__U7hvI",H=function(){var e=(0,s.m)(),n=(0,t.Z)(e,2),r=n[0],o=r.stateApp,u=r.isOwnerLobby,d=r.winner,f=n[1],m=(0,c.js)(),p=(0,t.Z)(m,1)[0].idLobby,v=(0,l.J)().sendMessage,_=(0,i.s0)(),w="countdown"===o,h="gameOver"===o;return(0,j.jsxs)("div",{className:Y,children:[w&&(0,j.jsx)(q,{handleCountownEnd:function(){if(u)return v({event:"countdownEnd",idLobby:p}),void f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{stateApp:"game"})}));f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{stateApp:"game"})}))}}),h&&(0,j.jsx)(S,{winner:d,isOwnerLobby:u,handleGameOverEnd:function(){f((function(e){return(0,a.Z)((0,a.Z)({},e),{},{stateApp:"lobby"})})),_("/lobby")}})]})},V="PageGame_pageGame__4pe1X",D=function(){var e=(0,s.m)(),n=(0,t.Z)(e,1)[0].stateApp,r=d();return m(),!n||"lobby"===n||"preLobby"===n?(0,j.jsx)(p.default,{}):(0,j.jsxs)("main",{className:V,children:[(0,j.jsx)(Z,{stateGame:r}),(0,j.jsx)(M,{stateGame:r}),(0,j.jsx)(H,{})]})}}}]);
//# sourceMappingURL=526.06c9e0a9.chunk.js.map