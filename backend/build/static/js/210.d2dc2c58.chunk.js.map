{"version":3,"file":"static/js/210.d2dc2c58.chunk.js","mappings":"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","sources":["webpack://jet-fighters-online-2.0/./src/components/BtnSubmit.module.scss?d094","components/BtnSubmit.js","webpack://jet-fighters-online-2.0/./src/components/FormAuth.module.scss?0c84","components/FormAuth.js","webpack://jet-fighters-online-2.0/./src/components/InputAuth.module.scss?e3b0","components/InputAuth.js","hooks/useSafeDispatch.js","hooks/useAsync.js","hooks/useQuery.js","webpack://jet-fighters-online-2.0/./src/routes/reset-password/PageResetPassword.module.scss?70cf","routes/reset-password/PageResetPassword.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"btn\":\"BtnSubmit_btn__DwWgI\"};","import PropTypes from 'prop-types';\r\n\r\n// styles\r\nimport styles from './BtnSubmit.module.scss';\r\n\r\nconst propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  disabled: PropTypes.bool,\r\n};\r\n\r\nconst BtnSubmit = ({ disabled, children }) => (\r\n  <button disabled={disabled} type=\"submit\" className={styles.btn}>\r\n    {children}\r\n  </button>\r\n);\r\n\r\nBtnSubmit.propTypes = propTypes;\r\n\r\nexport default BtnSubmit;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"FormAuth_form__9jVKL\"};","import PropTypes from 'prop-types';\r\n\r\n// styles\r\nimport styles from './FormAuth.module.scss';\r\n\r\nconst propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n  children: PropTypes.node.isRequired,\r\n};\r\n\r\nconst FormAuth = ({ onSubmit, children }) => (\r\n  <form onSubmit={onSubmit} className={styles.form}>\r\n    {children}\r\n  </form>\r\n);\r\n\r\nFormAuth.propTypes = propTypes;\r\n\r\nexport default FormAuth;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"InputAuth_wrapper__mggdz\",\"input\":\"InputAuth_input__SPVYc\",\"wrapperInner\":\"InputAuth_wrapperInner__ghQHC\",\"undertext\":\"InputAuth_undertext__-F9on\"};","import PropTypes from 'prop-types';\r\n\r\n// styles\r\nimport styles from './InputAuth.module.scss';\r\n\r\nconst propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  type: PropTypes.string.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n  pattern: PropTypes.string,\r\n  undertext: PropTypes.string,\r\n  name: PropTypes.string.isRequired,\r\n};\r\n\r\nconst InputAuth = ({ id, type, label, undertext, pattern, name }) => (\r\n  <div className={styles.wrapper}>\r\n    <label className={styles.label} htmlFor={id}>\r\n      {label}\r\n    </label>\r\n    <div className={styles.wrapperInner}>\r\n      <input\r\n        required\r\n        pattern={pattern}\r\n        className={styles.input}\r\n        id={id}\r\n        type={type}\r\n        name={name}\r\n      />\r\n      <p className={styles.undertext}>{undertext}</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nInputAuth.propTypes = propTypes;\r\n\r\nexport default InputAuth;\r\n","/* eslint-disable no-void */\r\nimport { useRef, useLayoutEffect, useCallback } from 'react';\r\n\r\n/**\r\n * Returns the passed function as a safe variant which doesn't run\r\n * if the component is unmounted.\r\n *\r\n * @param {function} dispatch the function to make safe.\r\n *\r\n * @returns {function} - the safe variant of the passed function.\r\n */\r\nconst useSafeDispatch = (dispatch) => {\r\n  const mounted = useRef(false);\r\n\r\n  useLayoutEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  return useCallback(\r\n    (...args) => (mounted.current ? dispatch(...args) : void 0),\r\n    [dispatch]\r\n  );\r\n};\r\n\r\nexport default useSafeDispatch;\r\n","/* eslint-disable no-shadow */\r\nimport { useCallback, useReducer } from 'react';\r\nimport useSafeDispatch from './useSafeDispatch';\r\n\r\nconst asyncReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'pending': {\r\n      return { status: 'pending', data: null, error: null };\r\n    }\r\n    case 'resolved': {\r\n      return { status: 'resolved', data: action.data, error: null };\r\n    }\r\n    case 'rejected': {\r\n      return { status: 'rejected', data: null, error: action.error };\r\n    }\r\n    default: {\r\n      throw new Error(`Unhandled action type: ${action.type}`);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Monitors an async promise. Pass your promise to the 'run'\r\n * returned function.\r\n *\r\n * @param {{status, data}} initialState object with initial status and data.\r\n *\r\n * @returns {object} {setData, setError, error, status, data, run}.\r\n * @returns status can be 'idle', 'pending', 'resolved', 'rejected'.\r\n */\r\nconst useAsync = (initialState) => {\r\n  const [state, unsafeDispatch] = useReducer(asyncReducer, {\r\n    status: 'idle',\r\n    data: null,\r\n    error: null,\r\n    ...initialState,\r\n  });\r\n\r\n  const dispatch = useSafeDispatch(unsafeDispatch);\r\n\r\n  const { data, error, status } = state;\r\n\r\n  const run = useCallback(\r\n    (promise) => {\r\n      dispatch({ type: 'pending' });\r\n      promise.then(\r\n        (receivedData) => {\r\n          dispatch({ type: 'resolved', data: receivedData });\r\n        },\r\n        (error) => {\r\n          dispatch({ type: 'rejected', error });\r\n        }\r\n      );\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const setData = useCallback(\r\n    (data) => dispatch({ type: 'resolved', data }),\r\n    [dispatch]\r\n  );\r\n  const setError = useCallback(\r\n    (error) => dispatch({ type: 'rejected', error }),\r\n    [dispatch]\r\n  );\r\n\r\n  return {\r\n    setData,\r\n    setError,\r\n    error,\r\n    status,\r\n    data,\r\n    run,\r\n  };\r\n};\r\n\r\nexport default useAsync;\r\n","import { useLocation } from 'react-router-dom';\r\nimport { useMemo } from 'react';\r\n\r\nconst useQuery = () => {\r\n  const { search } = useLocation();\r\n\r\n  return useMemo(() => new URLSearchParams(search), [search]);\r\n};\r\n\r\nexport default useQuery;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"PageResetPassword_wrapper__zuu2h\",\"heading\":\"PageResetPassword_heading__wed9k\",\"wrapperLinks\":\"PageResetPassword_wrapperLinks__-ITlU\",\"link\":\"PageResetPassword_link__wLVea\"};","import { useEffect, useRef } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\n\r\n// shared hooks\r\nimport useQuery from '../../hooks/useQuery';\r\nimport useAsync from '../../hooks/useAsync';\r\n\r\n// services\r\nimport accountService from '../../services/account.service';\r\n\r\n// shared components\r\nimport FormAuth from '../../components/FormAuth';\r\nimport InputAuth from '../../components/InputAuth';\r\nimport BtnSubmit from '../../components/BtnSubmit';\r\n\r\n// styles\r\nimport styles from './PageResetPassword.module.scss';\r\n\r\nconst PageResetPassword = () => {\r\n  const tokenSaved = useRef(null);\r\n  const query = useQuery();\r\n  const navigate = useNavigate();\r\n  const {\r\n    data: dataReceived,\r\n    error,\r\n    status,\r\n    run,\r\n  } = useAsync({\r\n    status: 'idle',\r\n  });\r\n\r\n  useEffect(() => {\r\n    const token = query.get('token');\r\n\r\n    // remove token from url to prevent http referer leakage\r\n    navigate(window.location.pathname, { replace: true });\r\n\r\n    // don't request server on obviously wrong tokens\r\n    if (!token || token.length !== 80) return null;\r\n\r\n    tokenSaved.current = token;\r\n  }, []);\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    const dataFromForm = new FormData(event.target);\r\n\r\n    run(\r\n      accountService.resetPassword({\r\n        password: dataFromForm.get('password'),\r\n        passwordConfirm: dataFromForm.get('passwordConfirm'),\r\n        token: tokenSaved.current,\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <main className={styles.wrapper}>\r\n      <h1 className={styles.heading}>Reset</h1>\r\n\r\n      <FormAuth onSubmit={handleSubmit}>\r\n        <InputAuth\r\n          id=\"password\"\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          undertext=\"* 8-25 characters\"\r\n          pattern=\"^.{8,25}$\"\r\n          name=\"password\"\r\n        />\r\n        <InputAuth\r\n          id=\"password-confirm\"\r\n          label=\"Confirm the password\"\r\n          type=\"password\"\r\n          pattern=\"^.{8,25}$\"\r\n          name=\"passwordConfirm\"\r\n        />\r\n        <BtnSubmit>Reset password</BtnSubmit>\r\n      </FormAuth>\r\n    </main>\r\n  );\r\n};\r\nexport default PageResetPassword;\r\n"],"names":["disabled","children","type","className","styles","onSubmit","id","label","undertext","pattern","name","htmlFor","required","dispatch","mounted","useRef","useLayoutEffect","current","useCallback","asyncReducer","state","action","status","data","error","Error","initialState","useReducer","unsafeDispatch","useSafeDispatch","run","promise","then","receivedData","setData","setError","search","useLocation","useMemo","URLSearchParams","tokenSaved","query","useQuery","navigate","useNavigate","useAsync","useEffect","token","get","window","location","pathname","replace","length","FormAuth","event","preventDefault","dataFromForm","FormData","target","accountService","password","passwordConfirm","InputAuth","BtnSubmit"],"sourceRoot":""}