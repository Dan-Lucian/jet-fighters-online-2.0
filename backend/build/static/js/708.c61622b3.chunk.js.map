{"version":3,"file":"static/js/708.c61622b3.chunk.js","mappings":"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","sources":["routes/game/hooks/useGameWsEvents.js","hooks/useEventListener.js","routes/game/utils/canvas.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/Game.module.scss?e7c3","routes/game/components/Game.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/Header.module.scss?b85b","routes/game/components/Header.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/Player.module.scss?3bdf","routes/game/components/Player.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/TablePlayers.module.scss?f062","routes/game/components/TablePlayers.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/Countdown.module.scss?07b6","routes/game/components/Countdown.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/GameOver.module.scss?a6d8","routes/game/components/GameOver.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/Overlay.module.scss?1064","routes/game/components/Overlay.js","webpack://jet-fighters-online-2.0/./src/routes/game/PageGame.module.scss?5bdc","routes/game/PageGame.js","routes/game/hooks/useKeyEvents.js"],"sourcesContent":["/* eslint-disable no-use-before-define */\r\nimport { useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\n\r\n// shared hooks\r\nimport { useContextGlobal } from '../../../providers/ProviderGlobal';\r\nimport {\r\n  useContextLobby,\r\n  valueDefaultProviderLobby,\r\n} from '../../../providers/ProviderLobby';\r\nimport { useContextWebsocket } from '../../../providers/ProviderWebsocket';\r\n\r\nconst useGameWsEvents = () => {\r\n  const { state: stateGameInitial } = useLocation();\r\n  const [global, setGlobal] = useContextGlobal();\r\n  const [lobby, setLobby] = useContextLobby();\r\n  const { message, resetMessage } = useContextWebsocket();\r\n  const navigate = useNavigate();\r\n\r\n  const { stateApp } = global;\r\n  const { event } = message;\r\n  const { stateGame } = message;\r\n\r\n  const stateGameValid = stateGame || stateGameInitial || stateGameDefault;\r\n  const isStateAppCountdown = stateApp === 'countdown';\r\n  const isStateAppGame = stateApp === 'game';\r\n\r\n  useEffect(() => {\r\n    if (isStateAppGame && event === 'updateGame') {\r\n      console.log('EVENT: updateGame');\r\n      // stateGameCurrent.current = stateGameReceived;\r\n    }\r\n\r\n    // received by the owner when the joiner quit the lobby.\r\n    if ((isStateAppGame || isStateAppCountdown) && event === 'quitJoiner') {\r\n      console.log('EVENT: quitJoiner');\r\n      setGlobal((prev) => ({\r\n        ...prev,\r\n        stateApp: 'lobby',\r\n        msgPopup: `${lobby.nameJoiner} has quit/disconnected.`,\r\n      }));\r\n      setLobby((prev) => ({\r\n        ...prev,\r\n        nameJoiner: 'Empty...',\r\n        isConnectedJoiner: false,\r\n        isReadyJoiner: false,\r\n      }));\r\n      resetMessage();\r\n      navigate('/lobby');\r\n    }\r\n\r\n    // received by the joiner when the owner quit the lobby\r\n    if ((isStateAppGame || isStateAppCountdown) && event === 'quitOwner') {\r\n      console.log('EVENT: quitOwner');\r\n      setGlobal((prev) => ({\r\n        ...prev,\r\n        stateApp: 'preLobby',\r\n        msgPopup: `${lobby.nameOwner} has quit/disconnected.`,\r\n      }));\r\n      setLobby({ ...valueDefaultProviderLobby });\r\n      resetMessage();\r\n      navigate('/');\r\n    }\r\n\r\n    if (isStateAppGame && event === 'gameOver') {\r\n      console.log('EVENT: gameOver');\r\n\r\n      const { winner, winsOwner, winsJoiner } = message;\r\n      console.log('Winner: ', winner);\r\n\r\n      setGlobal((prev) => ({ ...prev, stateApp: 'gameOver', winner }));\r\n      setLobby((prev) => ({\r\n        ...prev,\r\n        winsOwner,\r\n        winsJoiner,\r\n        isReadyOwner: false,\r\n        isReadyJoiner: false,\r\n      }));\r\n      // stateGameCurrent.current = stateGameReceived;\r\n    }\r\n  }, [message]);\r\n\r\n  return stateGameValid;\r\n};\r\n\r\nconst stateGameDefault = {\r\n  joiner: {\r\n    name: '_____ ',\r\n    score: 0,\r\n  },\r\n  owner: {\r\n    name: '_____ ',\r\n    score: 0,\r\n  },\r\n  settings: {\r\n    scoreMax: '0',\r\n    widthMap: 600,\r\n    heightMap: 300,\r\n  },\r\n};\r\n\r\nexport { useGameWsEvents };\r\n","import { useRef, useEffect } from 'react';\r\n\r\n/**\r\n * Puts an event listener to an element.\r\n * @param {string} eventName event name.\r\n * @param {function} handler event handler function.\r\n * @param {Object} [element=window] default = window, optional object to put the eventListener on.\r\n *\r\n */\r\nconst useEventListener = (eventName, handler, element = window) => {\r\n  // stores the handler\r\n  const savedHandler = useRef();\r\n\r\n  // Update ref.current value if handler changes.\r\n  // This allows our effect below to always get latest handler\r\n  // without us needing to pass it in effect deps array\r\n  // and potentially cause effect to re-run every render.\r\n  useEffect(() => {\r\n    console.log('effect runs');\r\n    savedHandler.current = handler;\r\n  }, [handler]);\r\n\r\n  useEffect(() => {\r\n    const isSuported = element && element.addEventListener;\r\n    if (!isSuported) {\r\n      console.log(`Element doesn't support addEventListener`);\r\n      return;\r\n    }\r\n\r\n    // Create event listener that calls handler function stored in ref\r\n    // don't know why exactly it is needed ...\r\n    // probably to not refference the same function but to call it\r\n    const eventListener = (event) => savedHandler.current(event);\r\n\r\n    console.log(`${eventName} event added`);\r\n    element.addEventListener(eventName, eventListener);\r\n\r\n    return () => {\r\n      element.removeEventListener(eventName, eventListener);\r\n      console.log(`${eventName} event removed`);\r\n    };\r\n  }, [eventName, element]);\r\n};\r\n\r\nexport { useEventListener };\r\n","/* eslint-disable no-use-before-define */\r\nconst clearCanvas = (ctx) => {\r\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n};\r\n\r\nconst drawBullets = (ctx, stateGame) => {\r\n  const { owner, joiner } = stateGame;\r\n\r\n  for (let i = 0; i < owner.bullets.length; i += 1) {\r\n    ctx.fillStyle = owner.bullets[i].color;\r\n    ctx.fillRect(owner.bullets[i].x, owner.bullets[i].y, 4, 4);\r\n  }\r\n\r\n  for (let i = 0; i < joiner.bullets.length; i += 1) {\r\n    ctx.fillStyle = joiner.bullets[i].color;\r\n    ctx.fillRect(joiner.bullets[i].x, joiner.bullets[i].y, 4, 4);\r\n  }\r\n};\r\n\r\nconst drawJets = (ctx, stateGame, imagesJet) => {\r\n  const { owner, joiner } = stateGame;\r\n  const { imgJetOwner, imgJetJoiner } = imagesJet;\r\n\r\n  drawJet(ctx, owner, imgJetOwner);\r\n  drawJet(ctx, joiner, imgJetJoiner);\r\n};\r\n\r\nconst drawJet = (ctx, stateGamePlayer, imgJet) => {\r\n  const { scale, x, y } = stateGamePlayer;\r\n\r\n  // just works\r\n  const rad = -((stateGamePlayer.angle * Math.PI) / 180 + Math.PI);\r\n\r\n  // sets scale and origin\r\n  ctx.setTransform(scale, 0, 0, scale, x, y);\r\n  ctx.rotate(rad);\r\n  ctx.drawImage(imgJet, -imgJet.width / 2, -imgJet.height / 2);\r\n};\r\n\r\nexport { clearCanvas, drawBullets, drawJets };\r\n","// extracted by mini-css-extract-plugin\nexport default {\"game\":\"Game_game__8rvLL\"};","/* eslint-disable react/prop-types */\r\n/* eslint-disable no-use-before-define */\r\nimport { useRef, useEffect } from 'react';\r\n\r\n// utils\r\nimport { clearCanvas, drawBullets, drawJets } from '../utils/canvas';\r\n\r\n// config\r\nimport { typesJet } from '../../../config/typesJet';\r\n\r\n// styles\r\nimport styles from './Game.module.scss';\r\n\r\nconst draw = (ctx, stateGame, imagesJet) => {\r\n  clearCanvas(ctx);\r\n  drawBullets(ctx, stateGame);\r\n  drawJets(ctx, stateGame, imagesJet);\r\n};\r\n\r\nconst Game = ({ stateGame }) => {\r\n  console.log('Render: <Game />');\r\n  const refCanvas = useRef();\r\n  const imagesJet = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!stateGame.settings.idLobby) return;\r\n\r\n    const imgJetOwner = new Image();\r\n    imgJetOwner.src = typesJet[stateGame.owner.typeJet].imgJet;\r\n\r\n    const imgJetJoiner = new Image();\r\n    imgJetJoiner.src = typesJet[stateGame.joiner.typeJet].imgJet;\r\n\r\n    imagesJet.current = {\r\n      imgJetOwner,\r\n      imgJetJoiner,\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!stateGame.settings.idLobby) return;\r\n\r\n    const canvas = refCanvas.current;\r\n    const context = canvas.getContext('2d');\r\n    let idRequestAnimationFrame;\r\n\r\n    const render = () => {\r\n      draw(context, stateGame, imagesJet.current);\r\n      idRequestAnimationFrame = requestAnimationFrame(render);\r\n    };\r\n    render();\r\n\r\n    return () => {\r\n      cancelAnimationFrame(idRequestAnimationFrame);\r\n    };\r\n  });\r\n\r\n  const { widthMap, heightMap } = stateGame.settings;\r\n\r\n  return (\r\n    <canvas\r\n      ref={refCanvas}\r\n      width={widthMap}\r\n      height={heightMap}\r\n      className={styles.game}\r\n    >\r\n      Game screen\r\n    </canvas>\r\n  );\r\n};\r\n\r\nexport default Game;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"Header_header__ldbyd\"};","import PropTypes from 'prop-types';\r\n\r\n// styles\r\nimport styles from './Header.module.scss';\r\n\r\nconst Header = ({ text }) => <h2 className={styles.header}>{text}</h2>;\r\nHeader.propTypes = {\r\n  text: PropTypes.string,\r\n};\r\n\r\nexport default Header;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Player_wrapper__n4edA\",\"name\":\"Player_name__8pYnT\",\"ball\":\"Player_ball__VKkU3\",\"jetType\":\"Player_jetType__MJuvK\",\"wrapperColor\":\"Player_wrapperColor__HId0W\",\"textColor\":\"Player_textColor__1K3tt\",\"squareColor\":\"Player_squareColor__o7tJg\"};","import PropTypes from 'prop-types';\r\n\r\n// styles\r\nimport styles from './Player.module.scss';\r\n\r\nconst Player = ({ player }) => {\r\n  const { name, score, typeJet } = player;\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.ball} />\r\n      <p className={styles.name}>\r\n        {name}: {score}\r\n      </p>\r\n      <p className={styles.jetType}>Jet type: {typeJet}</p>\r\n      <div className={styles.wrapperColor}>\r\n        <p className={styles.textColor}>Color:</p>\r\n        <div\r\n          style={{ backgroundColor: player.color }}\r\n          className={styles.squareColor}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nPlayer.propTypes = {\r\n  player: PropTypes.object,\r\n};\r\n\r\nexport default Player;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"TablePlayers_table__MmT9u\"};","/* eslint-disable react/prop-types */\r\n\r\n// local components\r\nimport Header from './Header';\r\nimport Player from './Player';\r\n\r\n// styles\r\nimport styles from './TablePlayers.module.scss';\r\n\r\nconst TablePlayers = ({ stateGame }) => {\r\n  const { owner, joiner } = stateGame;\r\n  const { scoreMax } = stateGame.settings;\r\n\r\n  return (\r\n    <div className={styles.table}>\r\n      <Header text={`Max score: ${scoreMax}`} />\r\n      <Player player={owner} />\r\n      <Player player={joiner} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TablePlayers;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Countdown_wrapper__b27ED\"};","import { useState, useEffect, useLayoutEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// styles\r\nimport styles from './Countdown.module.scss';\r\n\r\nconst Countdown = ({ handleCountownEnd }) => {\r\n  const [count, setCount] = useState(3);\r\n\r\n  useEffect(() => {\r\n    const idInterval = setInterval(() => {\r\n      setCount((prev) => prev - 1);\r\n    }, 1000);\r\n\r\n    return () => {\r\n      clearInterval(idInterval);\r\n    };\r\n  }, []);\r\n\r\n  useLayoutEffect(() => {\r\n    if (count < 1) handleCountownEnd();\r\n  });\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.count}>{count}</div>\r\n    </div>\r\n  );\r\n};\r\nCountdown.propTypes = {\r\n  handleCountownEnd: PropTypes.func,\r\n};\r\n\r\nexport default Countdown;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"GameOver_wrapper__c3ItD\"};","import { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// styles\r\nimport styles from './GameOver.module.scss';\r\n\r\nconst GameOver = ({ winner, isOwnerLobby, handleGameOverEnd }) => {\r\n  console.log(winner, isOwnerLobby, handleGameOverEnd);\r\n  useEffect(() => {\r\n    const idInterval = setTimeout(() => {\r\n      handleGameOverEnd();\r\n    }, 3000);\r\n\r\n    return () => {\r\n      clearInterval(idInterval);\r\n      handleGameOverEnd();\r\n    };\r\n  }, [handleGameOverEnd]);\r\n\r\n  let text = winner === 'joiner' ? 'You Win' : 'You Lose';\r\n  if (isOwnerLobby) {\r\n    text = winner === 'owner' ? 'You Win' : 'You Lose';\r\n  }\r\n  if (winner === 'draw') {\r\n    text = `It's a draw`;\r\n  }\r\n\r\n  return <div className={styles.wrapper}>{text}</div>;\r\n};\r\nGameOver.propTypes = {\r\n  winner: PropTypes.string,\r\n  isOwnerLobby: PropTypes.bool,\r\n  handleGameOverEnd: PropTypes.func,\r\n};\r\n\r\nexport default GameOver;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Overlay_wrapper__BWZYG\"};","import { useNavigate } from 'react-router-dom';\r\n\r\n// shared hooks\r\nimport { useContextGlobal } from '../../../providers/ProviderGlobal';\r\nimport { useContextLobby } from '../../../providers/ProviderLobby';\r\nimport { useContextWebsocket } from '../../../providers/ProviderWebsocket';\r\n\r\n// local components\r\nimport Countdown from './Countdown';\r\nimport GameOver from './GameOver';\r\n\r\n// styles\r\nimport styles from './Overlay.module.scss';\r\n\r\nconst Overlay = () => {\r\n  const [global, setGlobal] = useContextGlobal();\r\n  const [lobby] = useContextLobby();\r\n  const { sendMessage } = useContextWebsocket();\r\n  const navigate = useNavigate();\r\n\r\n  const { stateApp, isOwnerLobby, winner } = global;\r\n  const { idLobby } = lobby;\r\n\r\n  const isStateAppCountdown = stateApp === 'countdown';\r\n  const isStateAppGameOver = stateApp === 'gameOver';\r\n\r\n  const handleCountdownEnd = () => {\r\n    if (isOwnerLobby) {\r\n      sendMessage({ event: 'countdownEnd', idLobby });\r\n      setGlobal((prev) => ({ ...prev, stateApp: 'game' }));\r\n      return;\r\n    }\r\n\r\n    setGlobal((prev) => ({ ...prev, stateApp: 'game' }));\r\n  };\r\n\r\n  const handleGameOverEnd = () => {\r\n    setGlobal((prev) => ({ ...prev, stateApp: 'lobby' }));\r\n    navigate('/lobby');\r\n  };\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      {isStateAppCountdown && (\r\n        <Countdown handleCountownEnd={handleCountdownEnd} />\r\n      )}\r\n      {isStateAppGameOver && (\r\n        <GameOver\r\n          winner={winner}\r\n          isOwnerLobby={isOwnerLobby}\r\n          handleGameOverEnd={handleGameOverEnd}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Overlay;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"pageGame\":\"PageGame_pageGame__4pe1X\"};","// shared hooks\r\nimport { useContextGlobal } from '../../providers/ProviderGlobal';\r\nimport { useContextLobby } from '../../providers/ProviderLobby';\r\nimport { useContextWebsocket } from '../../providers/ProviderWebsocket';\r\n\r\n// local hooks\r\nimport { useGameWsEvents } from './hooks/useGameWsEvents';\r\nimport { useKeyEvents } from './hooks/useKeyEvents';\r\n\r\n// local components\r\nimport Game from './components/Game';\r\nimport TablePlayers from './components/TablePlayers';\r\nimport Overlay from './components/Overlay';\r\n\r\n// styles\r\nimport styles from './PageGame.module.scss';\r\n\r\nconst PageGame = () => {\r\n  const stateGame = useGameWsEvents();\r\n  useKeyEvents();\r\n\r\n  return (\r\n    <main className={styles.pageGame}>\r\n      <Game stateGame={stateGame} />\r\n      <TablePlayers stateGame={stateGame} />\r\n      <Overlay />\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default PageGame;\r\n","import { useCallback } from 'react';\r\n\r\n// shared hooks\r\nimport { useContextGlobal } from '../../../providers/ProviderGlobal';\r\nimport { useContextWebsocket } from '../../../providers/ProviderWebsocket';\r\nimport { useEventListener } from '../../../hooks/useEventListener';\r\n\r\nconst useKeyEvents = () => {\r\n  const [global] = useContextGlobal();\r\n  const { sendMessage } = useContextWebsocket();\r\n\r\n  const { stateApp, isOwnerLobby } = global;\r\n\r\n  const isStateAppGame = stateApp === 'game';\r\n\r\n  const handleKeyDown = useCallback(\r\n    (e) => {\r\n      if (isStateAppGame) {\r\n        e.preventDefault();\r\n        if (e.repeat) return;\r\n\r\n        const response = {\r\n          event: 'input',\r\n          isOwnerLobby,\r\n        };\r\n\r\n        switch (e.key) {\r\n          case 'ArrowRight':\r\n            sendMessage({ ...response, isPressedRight: true });\r\n            return;\r\n\r\n          case 'ArrowLeft':\r\n            sendMessage({ ...response, isPressedLeft: true });\r\n            return;\r\n\r\n          case ' ':\r\n            sendMessage({ ...response, isPressedFire: true });\r\n            break;\r\n\r\n          default:\r\n        }\r\n      }\r\n    },\r\n    [isOwnerLobby, isStateAppGame, sendMessage]\r\n  );\r\n\r\n  const handleKeyUp = useCallback(\r\n    (e) => {\r\n      if (isStateAppGame) {\r\n        e.preventDefault();\r\n        if (e.repeat) return;\r\n\r\n        const response = {\r\n          event: 'input',\r\n          isOwnerLobby,\r\n        };\r\n\r\n        switch (e.key) {\r\n          case 'ArrowRight':\r\n            sendMessage({ ...response, isReleasedRight: true });\r\n            return;\r\n\r\n          case 'ArrowLeft':\r\n            sendMessage({ ...response, isReleasedLeft: true });\r\n            break;\r\n\r\n          default:\r\n        }\r\n      }\r\n    },\r\n    [isOwnerLobby, isStateAppGame, sendMessage]\r\n  );\r\n\r\n  useEventListener('keydown', handleKeyDown);\r\n  useEventListener('keyup', handleKeyUp);\r\n};\r\n\r\nexport { useKeyEvents };\r\n"],"names":["stateGameDefault","joiner","name","score","owner","settings","scoreMax","widthMap","heightMap","useEventListener","eventName","handler","element","window","savedHandler","useRef","useEffect","console","log","current","addEventListener","eventListener","event","removeEventListener","drawJet","ctx","stateGamePlayer","imgJet","scale","x","y","rad","angle","Math","PI","setTransform","rotate","drawImage","width","height","draw","stateGame","imagesJet","clearRect","canvas","clearCanvas","i","bullets","length","fillStyle","color","fillRect","drawBullets","imgJetOwner","imgJetJoiner","drawJets","refCanvas","idLobby","Image","src","typesJet","typeJet","idRequestAnimationFrame","context","getContext","render","requestAnimationFrame","cancelAnimationFrame","ref","className","styles","text","player","style","backgroundColor","handleCountownEnd","useState","count","setCount","idInterval","setInterval","prev","clearInterval","useLayoutEffect","winner","isOwnerLobby","handleGameOverEnd","setTimeout","useContextGlobal","global","setGlobal","useContextLobby","lobby","sendMessage","useContextWebsocket","navigate","useNavigate","stateApp","isStateAppCountdown","isStateAppGameOver","stateGameInitial","useLocation","state","setLobby","message","resetMessage","stateGameValid","isStateAppGame","msgPopup","nameJoiner","isConnectedJoiner","isReadyJoiner","nameOwner","valueDefaultProviderLobby","winsOwner","winsJoiner","isReadyOwner","useGameWsEvents","handleKeyDown","useCallback","e","preventDefault","repeat","response","key","isPressedRight","isPressedLeft","isPressedFire","handleKeyUp","isReleasedRight","isReleasedLeft","useKeyEvents"],"sourceRoot":""}