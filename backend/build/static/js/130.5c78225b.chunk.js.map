{"version":3,"file":"static/js/130.5c78225b.chunk.js","mappings":"qMACA,EAA0B,iCAA1B,EAAkE,8BAAlE,EAAuG,8B,SCcvG,EAVwB,kBACtB,kBAAMA,UAAWC,EAAjB,WACE,gBAAKD,UAAWC,EAAhB,+BAEA,SAAC,KAAD,CAAMD,UAAWC,EAAaC,GAAG,IAAjC,uB,sFCkBJ,EAhBwB,SAACC,GACvB,IAAMC,GAAUC,EAAAA,EAAAA,SAAO,GASvB,OAPAC,EAAAA,EAAAA,kBAAgB,WAEd,OADAF,EAAQG,SAAU,EACX,WACLH,EAAQG,SAAU,KAEnB,KAEIC,EAAAA,EAAAA,cACL,kBAAcJ,EAAQG,QAAUJ,EAAQ,WAAR,kBAAoB,IACpD,CAACA,KCnBCM,EAAe,SAACC,EAAOC,GAC3B,OAAQA,EAAOC,MACb,IAAK,UACH,MAAO,CAAEC,OAAQ,UAAWC,KAAM,KAAMC,MAAO,MAEjD,IAAK,WACH,MAAO,CAAEF,OAAQ,WAAYC,KAAMH,EAAOG,KAAMC,MAAO,MAEzD,IAAK,WACH,MAAO,CAAEF,OAAQ,WAAYC,KAAM,KAAMC,MAAOJ,EAAOI,OAEzD,QACE,MAAM,IAAIC,MAAJ,iCAAoCL,EAAOC,SA4DvD,EA9CiB,SAACK,GAChB,OAAgCC,EAAAA,EAAAA,YAAWT,GAAD,QACxCI,OAAQ,OACRC,KAAM,KACNC,MAAO,MACJE,IAJL,eAAOP,EAAP,KAAcS,EAAd,KAOMhB,EAAWiB,EAAgBD,GAEzBL,EAAwBJ,EAAxBI,KAAMC,EAAkBL,EAAlBK,MAAOF,EAAWH,EAAXG,OAEfQ,GAAMb,EAAAA,EAAAA,cACV,SAACc,GACCnB,EAAS,CAAES,KAAM,YACjBU,EAAQC,MACN,SAACC,GACCrB,EAAS,CAAES,KAAM,WAAYE,KAAMU,OAErC,SAACT,GACCZ,EAAS,CAAES,KAAM,WAAYG,MAAAA,SAInC,CAACZ,IAGGsB,GAAUjB,EAAAA,EAAAA,cACd,SAACM,GAAD,OAAUX,EAAS,CAAES,KAAM,WAAYE,KAAAA,MACvC,CAACX,IAEGuB,GAAWlB,EAAAA,EAAAA,cACf,SAACO,GAAD,OAAWZ,EAAS,CAAES,KAAM,WAAYG,MAAAA,MACxC,CAACZ,IAGH,MAAO,CACLsB,QAAAA,EACAC,SAAAA,EACAX,MAAAA,EACAF,OAAAA,EACAC,KAAAA,EACAO,IAAAA,K,6CC/DJ,IANiB,WACf,IAAQM,GAAWC,EAAAA,EAAAA,MAAXD,OAER,OAAOE,EAAAA,EAAAA,UAAQ,kBAAM,IAAIC,gBAAgBH,KAAS,CAACA,M,qJCLrD,EAA0B,iCAA1B,EAA0E,sCAA1E,EAAuH,8B,SCuDvH,EAvCwB,WACtB,IAAMI,GAAa1B,EAAAA,EAAAA,UACb2B,GAAWC,EAAAA,EAAAA,MACjB,GAAwBC,EAAAA,EAAAA,KAAhBrB,EAAR,EAAQA,OAAQQ,EAAhB,EAAgBA,IAGVc,GAFQC,EAAAA,EAAAA,KAEMC,IAAI,SAaxB,OAZIF,IAAOJ,EAAWxB,QAAU4B,IAEhCG,EAAAA,EAAAA,YAAU,WAERN,EAASO,OAAOC,SAASC,SAAU,CAAEC,SAAS,IAGzCX,EAAWxB,SAAyC,KAA9BwB,EAAWxB,QAAQoC,QAE9CtB,EAAIuB,EAAAA,EAAAA,YAA2Bb,EAAWxB,YACzC,IAGAwB,EAAWxB,SACkB,KAA9BwB,EAAWxB,QAAQoC,QACR,aAAX9B,EAGa,YAAXA,GAA6B,SAACgC,EAAA,EAAD,KAG/B,iBAAM7C,UAAWC,EAAjB,UACE,iBAAKD,UAAWC,EAAhB,wCAC8B,KAC5B,SAAC,KAAD,CAAMC,GAAG,SAASF,UAAWC,EAA7B,yBAPG,SAAC6C,EAAA,QAAD","sources":["webpack://jet-fighters-online-2.0/./src/components/PageNonexistent/PageNonexistent.module.scss?dfb8","components/PageNonexistent/PageNonexistent.js","hooks/useSafeDispatch.js","hooks/useAsync.js","hooks/useQuery.js","webpack://jet-fighters-online-2.0/./src/routes/verify-email/PageVerifyEmail.module.scss?d1ad","routes/verify-email/PageVerifyEmail.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"PageNonexistent_wrapper__TAlZn\",\"link\":\"PageNonexistent_link__ojQmY\",\"text\":\"PageNonexistent_text__k-fmD\"};","import { Link } from 'react-router-dom';\r\n\r\n// styles\r\nimport styles from './PageNonexistent.module.scss';\r\n\r\nconst PageNonexistent = () => (\r\n  <main className={styles.wrapper}>\r\n    <div className={styles.text}>404 no page here</div>\r\n\r\n    <Link className={styles.link} to=\"/\">\r\n      home\r\n    </Link>\r\n  </main>\r\n);\r\n\r\nexport default PageNonexistent;\r\n","/* eslint-disable no-void */\r\nimport { useRef, useLayoutEffect, useCallback } from 'react';\r\n\r\n/**\r\n * Returns the passed function as a safe variant which doesn't run\r\n * if the component is unmounted.\r\n *\r\n * @param {function} dispatch the function to make safe.\r\n *\r\n * @returns {function} - the safe variant of the passed function.\r\n */\r\nconst useSafeDispatch = (dispatch) => {\r\n  const mounted = useRef(false);\r\n\r\n  useLayoutEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  return useCallback(\r\n    (...args) => (mounted.current ? dispatch(...args) : void 0),\r\n    [dispatch]\r\n  );\r\n};\r\n\r\nexport default useSafeDispatch;\r\n","/* eslint-disable no-shadow */\r\nimport { useCallback, useReducer } from 'react';\r\nimport useSafeDispatch from './useSafeDispatch';\r\n\r\nconst asyncReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'pending': {\r\n      return { status: 'pending', data: null, error: null };\r\n    }\r\n    case 'resolved': {\r\n      return { status: 'resolved', data: action.data, error: null };\r\n    }\r\n    case 'rejected': {\r\n      return { status: 'rejected', data: null, error: action.error };\r\n    }\r\n    default: {\r\n      throw new Error(`Unhandled action type: ${action.type}`);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Monitors an async promise. Pass your promise to the 'run'\r\n * returned function.\r\n *\r\n * @param {{status, data}} initialState object with initial status and data.\r\n *\r\n * @returns {object} {setData, setError, error, status, data, run}.\r\n * @returns status can be 'idle', 'pending', 'resolved', 'rejected'.\r\n */\r\nconst useAsync = (initialState) => {\r\n  const [state, unsafeDispatch] = useReducer(asyncReducer, {\r\n    status: 'idle',\r\n    data: null,\r\n    error: null,\r\n    ...initialState,\r\n  });\r\n\r\n  const dispatch = useSafeDispatch(unsafeDispatch);\r\n\r\n  const { data, error, status } = state;\r\n\r\n  const run = useCallback(\r\n    (promise) => {\r\n      dispatch({ type: 'pending' });\r\n      promise.then(\r\n        (receivedData) => {\r\n          dispatch({ type: 'resolved', data: receivedData });\r\n        },\r\n        (error) => {\r\n          dispatch({ type: 'rejected', error });\r\n        }\r\n      );\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const setData = useCallback(\r\n    (data) => dispatch({ type: 'resolved', data }),\r\n    [dispatch]\r\n  );\r\n  const setError = useCallback(\r\n    (error) => dispatch({ type: 'rejected', error }),\r\n    [dispatch]\r\n  );\r\n\r\n  return {\r\n    setData,\r\n    setError,\r\n    error,\r\n    status,\r\n    data,\r\n    run,\r\n  };\r\n};\r\n\r\nexport default useAsync;\r\n","import { useLocation } from 'react-router-dom';\r\nimport { useMemo } from 'react';\r\n\r\nconst useQuery = () => {\r\n  const { search } = useLocation();\r\n\r\n  return useMemo(() => new URLSearchParams(search), [search]);\r\n};\r\n\r\nexport default useQuery;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"PageVerifyEmail_wrapper__0HMzf\",\"wrapperInner\":\"PageVerifyEmail_wrapperInner__n6wDt\",\"link\":\"PageVerifyEmail_link__XxMdg\"};","import { useEffect, useRef } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\n\r\n// shared hooks\r\nimport useQuery from '../../hooks/useQuery';\r\nimport useAsync from '../../hooks/useAsync';\r\n\r\n// services\r\nimport accountService from '../../services/account.service';\r\n\r\n// shared components\r\nimport PageNonexistent from '../../components/PageNonexistent/PageNonexistent';\r\nimport Loader from '../../components/Loader/Loader';\r\n\r\n// styles\r\nimport styles from './PageVerifyEmail.module.scss';\r\n\r\nconst PageVerifyEmail = () => {\r\n  const tokenSaved = useRef();\r\n  const navigate = useNavigate();\r\n  const { status, run } = useAsync();\r\n  const query = useQuery();\r\n\r\n  const token = query.get('token');\r\n  if (token) tokenSaved.current = token;\r\n\r\n  useEffect(() => {\r\n    // remove token from url to prevent http referer leakage\r\n    navigate(window.location.pathname, { replace: true });\r\n\r\n    // don't request server on obviously wrong tokens\r\n    if (!tokenSaved.current || tokenSaved.current.length !== 80) return;\r\n\r\n    run(accountService.verifyEmail(tokenSaved.current));\r\n  }, []);\r\n\r\n  if (\r\n    !tokenSaved.current ||\r\n    tokenSaved.current.length !== 80 ||\r\n    status === 'rejected'\r\n  )\r\n    return <PageNonexistent />;\r\n  if (status === 'pending') return <Loader />;\r\n\r\n  return (\r\n    <main className={styles.wrapper}>\r\n      <div className={styles.wrapperInner}>\r\n        Email verified, you can now{' '}\r\n        <Link to=\"/login\" className={styles.link}>\r\n          login\r\n        </Link>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default PageVerifyEmail;\r\n"],"names":["className","styles","to","dispatch","mounted","useRef","useLayoutEffect","current","useCallback","asyncReducer","state","action","type","status","data","error","Error","initialState","useReducer","unsafeDispatch","useSafeDispatch","run","promise","then","receivedData","setData","setError","search","useLocation","useMemo","URLSearchParams","tokenSaved","navigate","useNavigate","useAsync","token","useQuery","get","useEffect","window","location","pathname","replace","length","accountService","Loader","PageNonexistent"],"sourceRoot":""}