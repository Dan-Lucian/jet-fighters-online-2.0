{"version":3,"file":"static/js/526.06c9e0a9.chunk.js","mappings":"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","sources":["webpack://jet-fighters-online-2.0/./src/components/PageNonexistent/PageNonexistent.module.scss?dfb8","components/PageNonexistent/PageNonexistent.js","routes/game/hooks/useGameWsEvents.js","hooks/useEventListener.js","routes/game/hooks/useKeyEvents.js","routes/game/utils/canvas.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/Game/Game.module.scss?4787","routes/game/components/Game/Game.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/Header/Header.module.scss?48f6","routes/game/components/Header/Header.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/Player/Player.module.scss?3ed2","routes/game/components/Player/Player.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/TablePlayers/TablePlayers.module.scss?8ff8","routes/game/components/TablePlayers/TablePlayers.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/Countdown/Countdown.module.scss?1cc8","routes/game/components/Countdown/Countdown.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/GameOver/GameOver.module.scss?b5e6","routes/game/components/GameOver/GameOver.js","webpack://jet-fighters-online-2.0/./src/routes/game/components/Overlay/Overlay.module.scss?c06d","routes/game/components/Overlay/Overlay.js","webpack://jet-fighters-online-2.0/./src/routes/game/PageGame.module.scss?5bdc","routes/game/PageGame.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"PageNonexistent_wrapper__TAlZn\",\"link\":\"PageNonexistent_link__ojQmY\",\"text\":\"PageNonexistent_text__k-fmD\"};","import { Link } from 'react-router-dom';\r\n\r\n// styles\r\nimport styles from './PageNonexistent.module.scss';\r\n\r\nconst PageNonexistent = () => (\r\n  <main className={styles.wrapper}>\r\n    <div className={styles.text}>404 no page here</div>\r\n\r\n    <Link className={styles.link} to=\"/\">\r\n      home\r\n    </Link>\r\n  </main>\r\n);\r\n\r\nexport default PageNonexistent;\r\n","import { useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\n\r\n// shared hooks\r\nimport { useContextGlobal } from '../../../providers/ProviderGlobal';\r\nimport {\r\n  useContextLobby,\r\n  valueDefaultProviderLobby,\r\n} from '../../../providers/ProviderLobby';\r\nimport { useContextWebsocket } from '../../../providers/ProviderWebsocket';\r\n\r\nconst useGameWsEvents = () => {\r\n  const { state: stateGameInitial } = useLocation();\r\n  const [global, setGlobal] = useContextGlobal();\r\n  const [lobby, setLobby] = useContextLobby();\r\n  const { message, resetMessage } = useContextWebsocket();\r\n  const navigate = useNavigate();\r\n\r\n  const { stateApp } = global;\r\n  const { event } = message;\r\n  const { stateGame } = message;\r\n\r\n  const stateGameValid = stateGame || stateGameInitial || stateGameDefault;\r\n  const isStateAppCountdown = stateApp === 'countdown';\r\n  const isStateAppGame = stateApp === 'game';\r\n\r\n  useEffect(() => {\r\n    if (isStateAppGame && event === 'updateGame') {\r\n      console.log('EVENT: updateGame');\r\n      // stateGameCurrent.current = stateGameReceived;\r\n    }\r\n\r\n    // received by the owner when the joiner quit the lobby.\r\n    if ((isStateAppGame || isStateAppCountdown) && event === 'quitJoiner') {\r\n      console.log('EVENT: quitJoiner');\r\n      setGlobal((prev) => ({\r\n        ...prev,\r\n        stateApp: 'lobby',\r\n        msgPopup: `${lobby.nameJoiner} has quit/disconnected.`,\r\n      }));\r\n      setLobby((prev) => ({\r\n        ...prev,\r\n        nameJoiner: 'Empty...',\r\n        isConnectedJoiner: false,\r\n        isReadyJoiner: false,\r\n      }));\r\n      resetMessage();\r\n      navigate('/lobby');\r\n    }\r\n\r\n    // received by the joiner when the owner quit the lobby\r\n    if ((isStateAppGame || isStateAppCountdown) && event === 'quitOwner') {\r\n      console.log('EVENT: quitOwner');\r\n      setGlobal((prev) => ({\r\n        ...prev,\r\n        stateApp: 'preLobby',\r\n        msgPopup: `${lobby.nameOwner} has quit/disconnected.`,\r\n      }));\r\n      setLobby({ ...valueDefaultProviderLobby });\r\n      resetMessage();\r\n      navigate('/');\r\n    }\r\n\r\n    if (isStateAppGame && event === 'gameOver') {\r\n      console.log('EVENT: gameOver');\r\n\r\n      const { winner, winsOwner, winsJoiner } = message;\r\n      console.log('Winner: ', winner);\r\n\r\n      setGlobal((prev) => ({ ...prev, stateApp: 'gameOver', winner }));\r\n      setLobby((prev) => ({\r\n        ...prev,\r\n        winsOwner,\r\n        winsJoiner,\r\n        isReadyOwner: false,\r\n        isReadyJoiner: false,\r\n      }));\r\n    }\r\n  }, [message]);\r\n\r\n  return stateGameValid;\r\n};\r\n\r\nconst stateGameDefault = {\r\n  joiner: {\r\n    name: '_____ ',\r\n    score: 0,\r\n  },\r\n  owner: {\r\n    name: '_____ ',\r\n    score: 0,\r\n  },\r\n  settings: {\r\n    scoreMax: '0',\r\n    widthMap: 600,\r\n    heightMap: 300,\r\n  },\r\n};\r\n\r\nexport default useGameWsEvents;\r\n","import { useRef, useEffect } from 'react';\r\n\r\n/**\r\n * Puts an event listener to an element.\r\n * @param {string} eventName event name.\r\n * @param {function} handler event handler function.\r\n * @param {Object} [element=window] default = window, optional object to put the eventListener on.\r\n *\r\n */\r\nconst useEventListener = (eventName, handler, element = window) => {\r\n  // stores the handler\r\n  const savedHandler = useRef();\r\n\r\n  // Update ref.current value if handler changes.\r\n  // This allows our effect below to always get latest handler\r\n  // without us needing to pass it in effect deps array\r\n  // and potentially cause effect to re-run every render.\r\n  useEffect(() => {\r\n    console.log('effect runs');\r\n    savedHandler.current = handler;\r\n  }, [handler]);\r\n\r\n  useEffect(() => {\r\n    const isSuported = element && element.addEventListener;\r\n    if (!isSuported) {\r\n      console.log(`Element doesn't support addEventListener`);\r\n      return;\r\n    }\r\n\r\n    // Create event listener that calls handler function stored in ref\r\n    // don't know why exactly it is needed ...\r\n    // probably to not refference the same function but to call it\r\n    const eventListener = (event) => savedHandler.current(event);\r\n\r\n    console.log(`${eventName} event added`);\r\n    element.addEventListener(eventName, eventListener);\r\n\r\n    return () => {\r\n      element.removeEventListener(eventName, eventListener);\r\n      console.log(`${eventName} event removed`);\r\n    };\r\n  }, [eventName, element]);\r\n};\r\n\r\nexport default useEventListener;\r\n","import { useCallback } from 'react';\r\n\r\n// shared hooks\r\nimport { useContextGlobal } from '../../../providers/ProviderGlobal';\r\nimport { useContextWebsocket } from '../../../providers/ProviderWebsocket';\r\nimport useEventListener from '../../../hooks/useEventListener';\r\n\r\nconst useKeyEvents = () => {\r\n  const [global] = useContextGlobal();\r\n  const { sendMessage } = useContextWebsocket();\r\n\r\n  const { stateApp, isOwnerLobby } = global;\r\n\r\n  const isStateAppGame = stateApp === 'game';\r\n\r\n  const handleKeyDown = useCallback(\r\n    (e) => {\r\n      if (isStateAppGame) {\r\n        e.preventDefault();\r\n        if (e.repeat) return;\r\n\r\n        const response = {\r\n          event: 'input',\r\n          isOwnerLobby,\r\n        };\r\n\r\n        switch (e.key) {\r\n          case 'ArrowRight':\r\n            sendMessage({ ...response, isPressedRight: true });\r\n            return;\r\n\r\n          case 'ArrowLeft':\r\n            sendMessage({ ...response, isPressedLeft: true });\r\n            return;\r\n\r\n          case ' ':\r\n            sendMessage({ ...response, isPressedFire: true });\r\n            break;\r\n\r\n          default:\r\n        }\r\n      }\r\n    },\r\n    [isOwnerLobby, isStateAppGame, sendMessage]\r\n  );\r\n\r\n  const handleKeyUp = useCallback(\r\n    (e) => {\r\n      if (isStateAppGame) {\r\n        e.preventDefault();\r\n        if (e.repeat) return;\r\n\r\n        const response = {\r\n          event: 'input',\r\n          isOwnerLobby,\r\n        };\r\n\r\n        switch (e.key) {\r\n          case 'ArrowRight':\r\n            sendMessage({ ...response, isReleasedRight: true });\r\n            return;\r\n\r\n          case 'ArrowLeft':\r\n            sendMessage({ ...response, isReleasedLeft: true });\r\n            break;\r\n\r\n          default:\r\n        }\r\n      }\r\n    },\r\n    [isOwnerLobby, isStateAppGame, sendMessage]\r\n  );\r\n\r\n  useEventListener('keydown', handleKeyDown);\r\n  useEventListener('keyup', handleKeyUp);\r\n};\r\n\r\nexport default useKeyEvents;\r\n","const draw = (ctx, stateGame, imagesJet) => {\r\n  clearCanvas(ctx);\r\n  drawBullets(ctx, stateGame);\r\n  drawJets(ctx, stateGame, imagesJet);\r\n};\r\n\r\nconst clearCanvas = (ctx) => {\r\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n};\r\n\r\nconst drawBullets = (ctx, stateGame) => {\r\n  const { owner, joiner } = stateGame;\r\n\r\n  for (let i = 0; i < owner.bullets.length; i += 1) {\r\n    ctx.fillStyle = owner.bullets[i].color;\r\n    ctx.fillRect(owner.bullets[i].x, owner.bullets[i].y, 4, 4);\r\n  }\r\n\r\n  for (let i = 0; i < joiner.bullets.length; i += 1) {\r\n    ctx.fillStyle = joiner.bullets[i].color;\r\n    ctx.fillRect(joiner.bullets[i].x, joiner.bullets[i].y, 4, 4);\r\n  }\r\n};\r\n\r\nconst drawJets = (ctx, stateGame, imagesJet) => {\r\n  const { owner, joiner } = stateGame;\r\n  const { imgJetOwner, imgJetJoiner } = imagesJet;\r\n\r\n  drawJet(ctx, owner, imgJetOwner);\r\n  drawJet(ctx, joiner, imgJetJoiner);\r\n};\r\n\r\nconst drawJet = (ctx, stateGamePlayer, imgJet) => {\r\n  const { scale, x, y } = stateGamePlayer;\r\n\r\n  // just works\r\n  const rad = -((stateGamePlayer.angle * Math.PI) / 180 + Math.PI);\r\n\r\n  // sets scale and origin\r\n  ctx.setTransform(scale, 0, 0, scale, x, y);\r\n  ctx.rotate(rad);\r\n  ctx.drawImage(imgJet, -imgJet.width / 2, -imgJet.height / 2);\r\n};\r\n\r\nexport { draw };\r\n","// extracted by mini-css-extract-plugin\nexport default {\"game\":\"Game_game__hsCmJ\",\"wrapper\":\"Game_wrapper__L87OH\",\"wrapperScores\":\"Game_wrapperScores__hx1oH\"};","/* eslint-disable react/prop-types */\r\nimport { useRef, useEffect } from 'react';\r\n\r\n// utils\r\nimport { draw } from '../../utils/canvas';\r\n\r\n// config\r\nimport { typesJet } from '../../../../config/typesJet';\r\n\r\n// styles\r\nimport styles from './Game.module.scss';\r\n\r\nconst Game = ({ stateGame }) => {\r\n  const refCanvas = useRef();\r\n  const imagesJet = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!stateGame.settings.idLobby) return;\r\n\r\n    const imgJetOwner = new Image();\r\n    imgJetOwner.src = typesJet[stateGame.owner.typeJet].imgJet;\r\n\r\n    const imgJetJoiner = new Image();\r\n    imgJetJoiner.src = typesJet[stateGame.joiner.typeJet].imgJet;\r\n\r\n    imagesJet.current = {\r\n      imgJetOwner,\r\n      imgJetJoiner,\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!stateGame.settings.idLobby) return;\r\n\r\n    const canvas = refCanvas.current;\r\n    const context = canvas.getContext('2d');\r\n    let idRequestAnimationFrame;\r\n\r\n    const render = () => {\r\n      draw(context, stateGame, imagesJet.current);\r\n      idRequestAnimationFrame = requestAnimationFrame(render);\r\n    };\r\n    render();\r\n\r\n    return () => {\r\n      cancelAnimationFrame(idRequestAnimationFrame);\r\n    };\r\n  });\r\n\r\n  const { widthMap, heightMap } = stateGame.settings;\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <canvas\r\n        ref={refCanvas}\r\n        width={widthMap}\r\n        height={heightMap}\r\n        className={styles.game}\r\n      >\r\n        Game screen\r\n      </canvas>\r\n      <div className={styles.wrapperScores}>\r\n        <div style={{ color: stateGame.owner.color }}>\r\n          {stateGame.owner.score}\r\n        </div>\r\n        <div style={{ color: stateGame.joiner.color }}>\r\n          {stateGame.joiner.score}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Game;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"Header_header__HJqgS\"};","import PropTypes from 'prop-types';\r\n\r\n// styles\r\nimport styles from './Header.module.scss';\r\n\r\nconst propTypes = {\r\n  text: PropTypes.string.isRequired,\r\n};\r\n\r\nconst Header = ({ text }) => <h2 className={styles.header}>{text}</h2>;\r\n\r\nHeader.propTypes = propTypes;\r\n\r\nexport default Header;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Player_wrapper__j5xys\",\"name\":\"Player_name__uwnPQ\",\"ball\":\"Player_ball__cySlH\",\"jetType\":\"Player_jetType__3sei-\",\"wrapperColor\":\"Player_wrapperColor__pChYp\",\"textColor\":\"Player_textColor__TeJJj\",\"squareColor\":\"Player_squareColor__V8cex\"};","import PropTypes from 'prop-types';\r\n\r\n// styles\r\nimport styles from './Player.module.scss';\r\n\r\nconst propTypes = {\r\n  player: PropTypes.object.isRequired,\r\n};\r\n\r\nconst Player = ({ player }) => {\r\n  const { name, score, typeJet } = player;\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.ball} />\r\n      <p className={styles.name}>\r\n        {name}: {score}\r\n      </p>\r\n      <p className={styles.jetType}>Jet type: {typeJet}</p>\r\n      <div className={styles.wrapperColor}>\r\n        <p className={styles.textColor}>Color:</p>\r\n        <div\r\n          style={{ backgroundColor: player.color }}\r\n          className={styles.squareColor}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nPlayer.propTypes = propTypes;\r\n\r\nexport default Player;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"TablePlayers_table__YqmUo\"};","/* eslint-disable react/prop-types */\r\n\r\n// local components\r\nimport Header from '../Header/Header';\r\nimport Player from '../Player/Player';\r\n\r\n// styles\r\nimport styles from './TablePlayers.module.scss';\r\n\r\nconst TablePlayers = ({ stateGame }) => {\r\n  const { owner, joiner } = stateGame;\r\n  const { scoreMax } = stateGame.settings;\r\n\r\n  return (\r\n    <div className={styles.table}>\r\n      <Header text={`Max score: ${scoreMax}`} />\r\n      <Player player={owner} />\r\n      <Player player={joiner} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TablePlayers;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Countdown_wrapper__ho6SL\"};","import { useState, useEffect, useLayoutEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// styles\r\nimport styles from './Countdown.module.scss';\r\n\r\nconst propTypes = {\r\n  handleCountownEnd: PropTypes.func.isRequired,\r\n};\r\n\r\nconst Countdown = ({ handleCountownEnd }) => {\r\n  const [count, setCount] = useState(3);\r\n\r\n  useEffect(() => {\r\n    const idInterval = setInterval(() => {\r\n      setCount((prev) => prev - 1);\r\n    }, 1000);\r\n\r\n    return () => {\r\n      clearInterval(idInterval);\r\n    };\r\n  }, []);\r\n\r\n  useLayoutEffect(() => {\r\n    if (count < 1) handleCountownEnd();\r\n  });\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.count}>{count}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nCountdown.propTypes = propTypes;\r\n\r\nexport default Countdown;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"GameOver_wrapper__23BzO\"};","import { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// styles\r\nimport styles from './GameOver.module.scss';\r\n\r\nconst propTypes = {\r\n  winner: PropTypes.string.isRequired,\r\n  isOwnerLobby: PropTypes.bool.isRequired,\r\n  handleGameOverEnd: PropTypes.func.isRequired,\r\n};\r\n\r\nconst GameOver = ({ winner, isOwnerLobby, handleGameOverEnd }) => {\r\n  useEffect(() => {\r\n    const idInterval = setTimeout(() => {\r\n      handleGameOverEnd();\r\n    }, 3000);\r\n\r\n    return () => {\r\n      clearInterval(idInterval);\r\n      handleGameOverEnd();\r\n    };\r\n  }, [handleGameOverEnd]);\r\n\r\n  let text = winner === 'joiner' ? 'You Win' : 'You Lose';\r\n  if (isOwnerLobby) {\r\n    text = winner === 'owner' ? 'You Win' : 'You Lose';\r\n  }\r\n  if (winner === 'draw') {\r\n    text = `It's a draw`;\r\n  }\r\n\r\n  return <div className={styles.wrapper}>{text}</div>;\r\n};\r\n\r\nGameOver.propTypes = propTypes;\r\n\r\nexport default GameOver;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Overlay_wrapper__U7hvI\"};","import { useNavigate } from 'react-router-dom';\r\n\r\n// shared hooks\r\nimport { useContextGlobal } from '../../../../providers/ProviderGlobal';\r\nimport { useContextLobby } from '../../../../providers/ProviderLobby';\r\nimport { useContextWebsocket } from '../../../../providers/ProviderWebsocket';\r\n\r\n// local components\r\nimport Countdown from '../Countdown/Countdown';\r\nimport GameOver from '../GameOver/GameOver';\r\n\r\n// styles\r\nimport styles from './Overlay.module.scss';\r\n\r\nconst Overlay = () => {\r\n  const [{ stateApp, isOwnerLobby, winner }, setGlobal] = useContextGlobal();\r\n  const [{ idLobby }] = useContextLobby();\r\n  const { sendMessage } = useContextWebsocket();\r\n  const navigate = useNavigate();\r\n\r\n  const isStateAppCountdown = stateApp === 'countdown';\r\n  const isStateAppGameOver = stateApp === 'gameOver';\r\n\r\n  const handleCountdownEnd = () => {\r\n    if (isOwnerLobby) {\r\n      sendMessage({ event: 'countdownEnd', idLobby });\r\n      setGlobal((prev) => ({ ...prev, stateApp: 'game' }));\r\n      return;\r\n    }\r\n\r\n    setGlobal((prev) => ({ ...prev, stateApp: 'game' }));\r\n  };\r\n\r\n  const handleGameOverEnd = () => {\r\n    setGlobal((prev) => ({ ...prev, stateApp: 'lobby' }));\r\n    navigate('/lobby');\r\n  };\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      {isStateAppCountdown && (\r\n        <Countdown handleCountownEnd={handleCountdownEnd} />\r\n      )}\r\n      {isStateAppGameOver && (\r\n        <GameOver\r\n          winner={winner}\r\n          isOwnerLobby={isOwnerLobby}\r\n          handleGameOverEnd={handleGameOverEnd}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Overlay;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"pageGame\":\"PageGame_pageGame__4pe1X\"};","// shared hooks\r\nimport { useContextGlobal } from '../../providers/ProviderGlobal';\r\n\r\n// local hooks\r\nimport useGameWsEvents from './hooks/useGameWsEvents';\r\nimport useKeyEvents from './hooks/useKeyEvents';\r\n\r\n// shared components\r\nimport PageNonexistent from '../../components/PageNonexistent/PageNonexistent';\r\n\r\n// local components\r\nimport Game from './components/Game/Game';\r\nimport TablePlayers from './components/TablePlayers/TablePlayers';\r\nimport Overlay from './components/Overlay/Overlay';\r\n\r\n// styles\r\nimport styles from './PageGame.module.scss';\r\n\r\nconst PageGame = () => {\r\n  const [{ stateApp }] = useContextGlobal();\r\n  const stateGame = useGameWsEvents();\r\n  useKeyEvents();\r\n\r\n  const isStateAppNotGame =\r\n    !stateApp || stateApp === 'lobby' || stateApp === 'preLobby';\r\n  if (isStateAppNotGame) return <PageNonexistent />;\r\n\r\n  return (\r\n    <main className={styles.pageGame}>\r\n      <Game stateGame={stateGame} />\r\n      <TablePlayers stateGame={stateGame} />\r\n      <Overlay />\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default PageGame;\r\n"],"names":["className","styles","to","stateGameDefault","joiner","name","score","owner","settings","scoreMax","widthMap","heightMap","stateGameInitial","useLocation","state","useContextGlobal","global","setGlobal","useContextLobby","lobby","setLobby","useContextWebsocket","message","resetMessage","navigate","useNavigate","stateApp","event","stateGameValid","stateGame","isStateAppCountdown","isStateAppGame","useEffect","console","log","prev","msgPopup","nameJoiner","isConnectedJoiner","isReadyJoiner","nameOwner","valueDefaultProviderLobby","winner","winsOwner","winsJoiner","isReadyOwner","eventName","handler","element","window","savedHandler","useRef","current","addEventListener","eventListener","removeEventListener","sendMessage","isOwnerLobby","handleKeyDown","useCallback","e","preventDefault","repeat","response","key","isPressedRight","isPressedLeft","isPressedFire","handleKeyUp","isReleasedRight","isReleasedLeft","useEventListener","clearCanvas","ctx","setTransform","clearRect","canvas","width","height","drawBullets","i","bullets","length","fillStyle","color","fillRect","x","y","drawJets","imagesJet","imgJetOwner","imgJetJoiner","drawJet","stateGamePlayer","imgJet","scale","rad","angle","Math","PI","rotate","drawImage","refCanvas","idLobby","Image","src","typesJet","typeJet","idRequestAnimationFrame","context","getContext","render","draw","requestAnimationFrame","cancelAnimationFrame","ref","style","text","player","backgroundColor","handleCountownEnd","useState","count","setCount","idInterval","setInterval","clearInterval","useLayoutEffect","handleGameOverEnd","setTimeout","isStateAppGameOver","useGameWsEvents","useKeyEvents","PageNonexistent"],"sourceRoot":""}